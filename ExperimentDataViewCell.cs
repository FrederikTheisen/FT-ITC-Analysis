// This file has been autogenerated from a class added in the UI designer.

using System;

using Foundation;
using AppKit;
using CoreGraphics;

namespace AnalysisITC
{
	public partial class ExperimentDataViewCell : NSView
	{
		ExperimentDataSource source;
		ExperimentData data;
		int Index => source.Data.IndexOf(data);
		bool IsSelected => Index == source.SelectedIndex;

		public event EventHandler<int> RemoveData;


		public ExperimentDataViewCell (IntPtr handle) : base (handle)
		{
		}

		public void Setup(ExperimentDataSource source, ExperimentData data, int index)
        {
			this.source = source;
			this.data = data;
			ExpNameLabel.StringValue = data.FileName;
			Line2.StringValue = data.Date.ToString();
			Line3.StringValue = data.MeasuredTemperature.ToString("###.0") + " °C | " + (data.SyringeConcentration*1000000).ToString() + " µM | " + (data.CellConcentration * 1000000).ToString() + " µM";
		}

		partial void RemoveClick(NSObject obj)
        {
			Console.WriteLine("RemoveClick " + Index);

			RemoveData?.Invoke(this, Index);

			DataManager.RemoveData(Index);
		}
    }
}
