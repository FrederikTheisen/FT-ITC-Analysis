// This file has been autogenerated from a class added in the UI designer.

using System;

using Foundation;
using AppKit;
using System.Collections.Generic;
using System.Linq;
using static AnalysisITC.Exporter;

namespace AnalysisITC
{
	public partial class ExportAccessoryView : NSView
	{
        ExportAccessoryViewController.ExportAccessoryViewSettings Settings { get; set; }


        public ExportAccessoryView (IntPtr handle) : base (handle)
		{
		}

		public void Setup(ExportAccessoryViewController.ExportAccessoryViewSettings settings)
		{
            Settings = settings;

            UnifyTimeAxisControl.State = Settings.UnifyTimeAxis ? NSCellStateValue.On : NSCellStateValue.Off;

            ExportCorrectedControl.Enabled = settings.BaselineCorrectionEnabled;
            ExportCorrectedControl.State = Settings.ExportBaselineCorrectDataPoints ? NSCellStateValue.On : NSCellStateValue.Off;
            BSLLabel.Enabled = settings.BaselineCorrectionEnabled;

            IncludeFittedPeaksControl.Enabled = settings.FittedPeakExportEnabled;
            IncludeFittedPeaksControl.State = settings.Columns.HasFlag(ExportColumns.Fit) ? NSCellStateValue.On : NSCellStateValue.Off;
            FitPeakLabel.Enabled = settings.FittedPeakExportEnabled;

            ExportOffsetCorrectedControl.Enabled = Settings.FittedPeakExportEnabled;
            ExportOffsetCorrectedControl.State = Settings.ExportOffsetCorrected ? NSCellStateValue.On : NSCellStateValue.Off;
            ITCsimExportOffsetCorrectedControl.Enabled = Settings.FittedPeakExportEnabled;
            ITCsimExportOffsetCorrectedControl.State = Settings.ExportOffsetCorrected ? NSCellStateValue.On : NSCellStateValue.Off;

            TabView.SelectAt((int)Settings.Export);
        }

        partial void ExportTypeControlAction(NSSegmentedControl sender)
        {
			TabView.SelectAt(sender.SelectedSegment);

            Settings.Export = (ExportType)(int)sender.SelectedSegment;

            Setup(Settings);
        }

        partial void ExportSelectionControlAction(NSSegmentedControl sender)
        {
            Settings.Selection = (ExportDataSelection)(int)sender.SelectedSegment;
            Settings.SetData();

            Setup(Settings);
        }

        partial void UnifyTimeAxisControlAction(NSButton sender)
        {
            Settings.UnifyTimeAxis = sender.State == NSCellStateValue.On;

            AppEventHandler.PrintAndLog("Settings.UnifyTimeAxis" + Settings.UnifyTimeAxis.ToString());
        }

        partial void BaselineCorrectControlAction(NSButton sender)
        {
            Settings.ExportBaselineCorrectDataPoints = sender.State == NSCellStateValue.On;

            AppEventHandler.PrintAndLog("Settings.ExportBaselineCorrectDataPoints" + Settings.ExportBaselineCorrectDataPoints.ToString());
        }

        partial void FittedPeakControlAction(NSButton sender)
        {
            switch (sender.State)
            {
                case NSCellStateValue.On: Settings.Columns |= ExportColumns.Fit; break;
                default: Settings.Columns &= ~ExportColumns.Fit; break;
            }

            AppEventHandler.PrintAndLog("Settings.ExportFittedPeaks" + Settings.Columns.HasFlag(ExportColumns.Fit).ToString());
        }

        partial void OffsetCorrectControlAction(NSButton sender)
        {
            SetOffsetCorrectionAction(sender);
        }

        partial void ITCsimExportOffsetCorrectedAction(NSButton sender)
        {
            SetOffsetCorrectionAction(sender);
        }

        private void SetOffsetCorrectionAction(NSButton sender)
        {
            Settings.ExportOffsetCorrected = sender.State == NSCellStateValue.On;

            AppEventHandler.PrintAndLog("Settings.ExportOffsetCorrected" + Settings.ExportOffsetCorrected.ToString());
        }
    }
}
